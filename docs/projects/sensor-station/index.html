<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400;1,600&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">


<title>Sensor Station</title>

<script>(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
mixpanel.init("bc05040913854909c46ba8408397cdb5", {batch_requests: true})</script>


<body><header class="container bg-white">
    <nav class="navbar navbar-expand-lg navbar-light">

	<a class="navbar-brand text-muted text-monospace" href="/"><span claa="h1">rusty eddy:</span></a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">

	    <nav class="navbar-nav w-100 justify-content-end">
		<div class="nav w-100">
  		    <a class="nav-link" href="/software">software </a>
  		    <a class="nav-link" href="/notes">notes </a>
  		    <a class="nav-link" href="/projects">projects </a>
  	            <a class="nav-link" href="/resume">resume </a>
  		    <a class="nav-link" href="/about">about </a>
		</div>
 	    </nav>
	</div>
    </nav>
</header>
<div class="jumbotron border-top border-bottom bg-white" >
    <div class="row">
	<div class="col-md"></div>
	<div class="col-md-8">
	  <h1 class="header h2 text-center pb-1">Sensor Station</h1>
	    <p class="leadin align-right text-muted text-center mt-0">
		Sensor Statiion is an internet connected thermostat, that connects to local wifi and spits out the temprature via MQTT.  Sensor will also have REST and HTML interfaces.

	    </p>
	</div>
	<div class="col-md"></div>
    </div>
    <div class="row text-center smaller-text">
	<div class="col"></div>
	<div class="col-8">
	    <nav class="nav justify-content-center">
                
                
                
                
                

	    </nav>

	</div>
	<div class="col"></div>
    </div>
</div>
<div id="main body">
<div class="container">

    <div class="row text-center mb-4">
	<div class="col"></div>
	<div class="col-6">
	    <article class="article text-big">
		<p>SensorStation is built with an esp32 WRoom32 development board and a
connected temprature sensor with on chip wifi. The software runs an
event loop with a timer periodically broadcasting the local current
temperature via MQTT.</p>
<blockquote>
<p>TODO: place a pic of the breadboard</p>
</blockquote>
<h2 id="features">Features</h2>
<p>Thermo32 has the following features currently implemented:</p>
<ol>
<li>Temperature sampling with a <a href="https://learn.adafruit.com/tmp36-temperature-sensor">tmp36 temperature</a></li>
<li>On chip Wifi connection for Internet access</li>
<li>MQTT client to advertise temperature to broker</li>
<li>LED flashes to indicate temperature has been sampled and
broadcast.</li>
<li>ESP-IDF / FreeRTOS, small, concurrent efficient and flexible.</li>
</ol>
<h3 id="feature-roadmap">Feature Roadmap</h3>
<ol>
<li>Limited history of previous reads (15 minute increments)</li>
<li>HTTP Server with HTML pages to display time and temprature</li>
<li>REST API to retrieve temprature history</li>
<li>REST API for configuration changes</li>
<li>MQTT configuration changes</li>
<li>HTML configuration changes</li>
</ol>
<h2 id="resources">Resources</h2>
<ul>
<li>Github: <a href="http://github.com/rustyeddy/thermo32">http://github.com/rustyeddy/thermo32</a></li>
<li>ESP32 Chip: <a href="http://esp32.org">ESP32</a></li>
<li>ESP-IDF: <a href="https://docs.espressif.com/projects/esp-idf/en/latest/index.html">ESP-IDF</a></li>
</ul>
<h2 id="hardware">Hardware</h2>
<p>The <em>Sensor Station</em> has been built on the esp32 with the FreeRTOS / ESP-IDF
software package. The ESP32 comes with a number of pins that provide
an astounding array of functionality.</p>
<h3 id="bill-of-materials">Bill Of Materials</h3>
<ul>
<li>esp32 development board</li>
<li>tmp36 temprature sensor</li>
<li>LED and resistor</li>
<li>breadboard and wires</li>
</ul>
<h3 id="schematic">Schematic</h3>
<blockquote>
<p>TODO: create a fritzing schematic of this layout</p>
</blockquote>
<h2 id="power-and-batteries">Power and Batteries</h2>
<blockquote>
<p>Todo: I need to research battery options for devices that will be
completely wireless.</p>
</blockquote>
<h2 id="temperature-and-sampling">Temperature and Sampling</h2>
<p>The chip is capabile of reading temperature samples much faster than
we as humans can process. It is also possible that one or more of the
samples may not have been read accurately due to various reasons. For
that reason we take 64 samples back to back (in less than a second),
average the samples together then determine the final <em>sampled</em>
temperature.</p>
<h3 id="samples-and-alarms">Samples and Alarms</h3>
<p>Historic sampling of things like temperature are typically stored in
increments of every 15 minutes or so. Since the esp32 is capable of taking
samples much faster than every minute, we can also watch for anomolies like
temperature spikes from something that caught on fire, for example.</p>
<h2 id="historic-data-on-board">Historic Data On Board</h2>
<p>We will keep a limited history of sensor data on chip in the event of
the network being inaccessable or a new user wanting recent historical
temperature readings.</p>

	    </article>
	</div>
	<div class="col"></div>
    </div>

</div>

<div class="container">
    <div class="row">
	
    </div> 

</div>

</div>


	</div><footer id="footer" class="container-fluid footer small-text pt-4 border-top">
    <section class="row">
	<div class="col"></div>
	<div class="col text-right">
	    <div class="address">419 Main St. #439</div>
	    <div class="city">Huntington Beach, CA. 92648</div>
	</div>
	<div class="col-3 text-center">
	    <div>
                Last update ~
                
		
                Sunday, May 19, 2019
		
                
            </div>
	    <div>site by <a href="/">Eddy Consulting, LLC.</a> ~ &#xA9; 2008 to 2020 </div>
	</div>
	<div class="col">
	    <div class="text-left">
	        <div class="phone">(714) 362-5402</div>
		<a href="https://github.com/rustyeddy">github</a> .
		<a href="https://twitter.com/rustyeddy">twitter</a> .
		<a href="https://linkedin.com/rustyeddy">linkedin</a><br/>	    
	    </div>
	</div>
	<div class="col"></div>
    </section>
</footer>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-19940083-13', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    </body>
</html>
