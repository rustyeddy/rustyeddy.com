<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Nixie+One|Open+Sans|Vollkorn:400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">


<title>Moni the Web Sitter</title>


<body><header class="container bg-white">
    <nav class="navbar navbar-expand-lg navbar-light">

	<a class="navbar-brand text-muted text-monospace" href="/"><span claa="h1">rusty eddy:</span></a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">

	    <nav class="navbar-nav w-100">
		<div class="nav w-50">
		    
  	            <a class="nav-link" href="/resume">resume</a>
		</div>
 	    </nav>

	</div>

    </nav>
</header>
<div id="main">

<div class="container">
    
    <div class="row">
	<div class="col"></div>
	<div class="col-8">
	    <h2 class="text-center">Moni the Web Sitter</h2>
	    <nav class="nav justify-content-center">
		<a class="nav-link" href="">github</a>
		<a class="nav-link" href="">site</a>
		<a class="nav-link active" href="/portfolio">portfolio</a>
	    </nav>
	</div>
	<div class="col"></div>
    </div>

</div>

<div class="container">
    <div class="row pt-4 mb-5 mt-5">
	<div class="col"></div>
	<div class="col-8 text-center">
	    <img class="img-fluid justify-content-center" src="/img/moni.png" />
	</div>
	<div class="col"></div>
    </div>
</div>

<div class="container">

    <div class="row mt-4">
	<div class="col"></div>
	<div class="col-lg-8 pl-4 pr-4">
	    <article class="article">
		<p>Moni was built to monitor resources I manage that are attached to the
web. Keeping track of servers, apps, websites and devices quickly
becomes a mess. Moni can server as an inventory database periodically
checking the health and performance of the things it manages.</p>
<h2 id="goal-and-requirement">Goal and Requirement</h2>
<p>The primary goals of Moni are as follows:</p>
<h3 id="moni-backend-server">Moni Backend Server</h3>
<ul>
<li>Provide a CRUD REST API for Sites</li>
<li>Utilise colly to crawl specified website and child pages</li>
<li>Record and classify external vs internal links</li>
<li>Test for performance of a given page</li>
<li>Test for accessibility of all links, external and internal</li>
</ul>
<h3 id="storage-and-persistance">Storage and Persistance</h3>
<p>What type of persistance should we use?  We can go crazy with this
one, mongo, mysql, postgress, other NoSQL?  Sure we can, but let us
keep this simple and just use the file system for persistence.  Yea, I
know this is no kind of <em>modern web app</em> without a sexy data
persistance engine, right?</p>
<p>Well, lets what we would like to store <em>exactly</em>? For now, we really
just want to store the domain name, the other external information we
will gather, from the respective <strong>source of truth</strong> reside in
external sources, for this reason we can avoid <em>caching</em> these results
in our own databases, and build them live from the SOT.</p>
<blockquote>
<p>TBD the store package we use in moni will soon be extended to
include some of the top cloud providers.</p>
</blockquote>
<p>Since our storage needs at the moment are simple we will stick with
the file system and use locally saved JSON files.  <em>Until we go head
into a real data base</em>.</p>
<h4 id="tbd-timeseries-database">TBD TimeSeries Database</h4>
<p>In a short period of time, we will want to record a series of data
over time and hence a <em>Time Series Database</em> such as <em>influxDB</em>(<a href="http://influxdb.io">http://influxdb.io</a>) is</p>
<h3 id="web-walker">Web Walker</h3>
<p>The purpose of <em>moni</em> is to periodically walk the websites under
survelience, tracking all links on every page of the website for
reachability and responsiveness.</p>
<p>A database or databases will be utilized in the future to track
performance and availability over time, this will help determine if
there are trends in a website slowing as well as recurring problems.</p>
<p>The above endpoints allow the user to get a list of website that are
being tracked, submit a new site for tracking, retrieve details on a
specific site walk and last to retrieve details on a specific page.</p>
<h2 id="architecture">Architecture</h2>
<p>Moni was intentionally written to be simple, a single executable can
be copied to a new computer and begin using <em>moni</em> without previously
installing any other requirements.</p>
<p>Now I do have plans that allow <em>moni</em> to interact with various other
tools such as a Database or two, MQTT and Websites, in addition to the
existing REST interface.</p>
<p>This was made simple because it was developed with go.</p>
<h3 id="colly-for-website-walking">Colly For Website walking</h3>
<p>Colly walks and scrapes the websites gather info we need. At the
moment we are only gathering the links (and anchor text) for links
that exist on sites we are watching.</p>
<p>I do not know Colly very well which is testament to how well it is
written, It was simple to get started with and just worked!</p>
<h3 id="go-channels-job-q">Go Channels Job Q</h3>
<p>We can use Go channels as a Job Queue. By creating a channel of, say
100 items with urls to be walked and with the walker reading URLs from
the channel we have created a very simple reader/writer.</p>
<h3 id="go-timeticker-job-scheduler">Go time.Ticker Job Scheduler</h3>
<p>There are a number of ways a job scheduler could be implemented. One
possibility is using a slice of URLs that need to be walked, perhaps
with circular index or a timer wheel.</p>
<p>Or we can create a Ticker for every URL that we will be walking. The
method or that listens on the ticker channel will run as a go
routine. When the ticker is activated, the URL to be walked is sent to
the <em>walkQ</em> channel where it will be queued up for walking.</p>
<p>This means we have no queue's to synchronize, sort or update. We can
end up with a bunch of Go routines running in the background, one for
each URL we are watching.</p>
<blockquote>
<p>Is this better or worse than managing a Job queue?</p>
</blockquote>
<p>Methinks this way is better! But I admit to being lazy also. Can this
be made better?</p>
<h3 id="gorilla-mux">Gorilla Mux</h3>
<h4 id="rest-api">REST API</h4>
<p>The first iteration will provide a REST API and a Web UI with a form
and a page that displays the results of a single page walk.  The rest
API will provide the following endpoints:</p>
<ul>
<li>GET	/api/sites</li>
<li>POST	/api/site/example.com</li>
<li>GET	/api/site/example.com</li>
<li>GET	/api/page/example.com/about</li>
</ul>
<h4 id="spa-web-ui">SPA Web UI</h4>
<ul>
<li>A single page with the following capabilities
<ul>
<li>display list of all sites</li>
<li>display list of pages on a given site</li>
<li>display links from a given page</li>
<li>display aliveness of page</li>
<li>display aliveness of every link from page</li>
<li>display response time of every page</li>
</ul>
</li>
<li>Form that allows new site inputs</li>
</ul>
<h2 id="development">Development</h2>
<p>I am trying to be purposeful while developing this tool, that is
adding specific features, that accomplish important tasks with out
breaking previous functionality or complicating the code beyond
supportability.</p>
<p>It is written in Go and expected to run on a typical Linux server,
though I do not believe anything should prohibit from being used on
alternative platforms.</p>
<h3 id="resources">Resources</h3>
<ul>
<li>Source is all on github</li>
<li>Have a problem? Issues are on github</li>
<li>Roadmap See projects on github</li>
<li>Deployment see CI/CD plans using github activities</li>
<li>DevOps our deployment and operations is all automated
<ul>
<li>provision with terraform</li>
<li>configure and launch with ansible</li>
</ul>
</li>
</ul>
<h2 id="deployment">Deployment</h2>
<p>This project will be deployed with a cloud provider. My favorite at
this point is <em>Digital Ocean</em>. Ideally we'd start out with Terraform
and fire up the hosts / containers of our base topology ready
listening for their configuration instructions</p>
<h3 id="cloud-providers">Cloud Providers</h3>
<p>Software load balancer, two servers running cloud providers.</p>
<h2 id="support">Support</h2>
	    </article>
	</div>
	<div class="col"></div>
    </div>
</div>



	</div><footer id="footer" class="container footer">
    <div class="row mt-4 pt-4 mb-4 pb-4">

	<div class="col-4 text-right">
	    <img id="myhead" class="img-fluid rounded-circle" src="/img/rusty-background.jpg" />
	</div>

	<div class="col-3 align-middle text-right">
	    <div class="name">Rusty Eddy</div>
	    <div class="address">419 Main St. #439</div>
	    <div class="city">Huntington Beach, CA</div>
	    <div class="zip">92648</div>
	</div>

	<div class="col-3 align-middle">
	    <div class="phone">(714) 362-5402</div>
	    <a href="mailto:rusty@rustyeddy.com">rusty@rustyeddy.com</a><br/>
	    <a href="https://github.com/rustyeddy">github</a> .
	    <a href="https://twitter.com/rustyeddy">twitter</a> .
	    <a href="https://linkedin.com/rustyeddy">linkedin</a><br/>
	</div>
	<div class="col"></div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-19940083-13', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    </body>
</html>
