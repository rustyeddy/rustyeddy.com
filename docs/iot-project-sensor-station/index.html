<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400;1,600&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">


<title>IoT Software Development Process</title>

<script>(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
mixpanel.init("bc05040913854909c46ba8408397cdb5", {batch_requests: true})</script>


<body><header class="container bg-white">
    <nav class="navbar navbar-expand-lg navbar-light">

	<a class="navbar-brand text-muted text-monospace" href="/"><span claa="h1">rusty eddy:</span></a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
	    <nav class="navbar-nav w-100 justify-content-end">
		<div class="nav w-100">
  		    <a class="nav-link" href="/iot-project-sensor-station"> sensor station &nbsp </a>
  	            <a class="nav-link" href="/resume"> resume &nbsp</a> 
  	            <a class="nav-link" href="/about"> about &nbsp</a> 
		</div>
 	    </nav>
	</div>
    </nav>
</header>
<div class="jumbotron border-top border-bottom bg-white" >
    <div class="row">
	<div class="col-md"></div>
	<div class="col-md-8">
	  <h1 class="header h2 text-center pb-1">IoT Software Development Process</h1>
	    <p class="leadin align-right text-muted text-center mt-0">
		IoT Software Project
	    </p>
	</div>
	<div class="col-md"></div>
    </div>
    <div class="row text-center smaller-text">
	<div class="col"></div>
	<div class="col-8">
	    <nav class="nav justify-content-center">
                
                
                
                
                

	    </nav>

	</div>
	<div class="col"></div>
    </div>
</div>
<div id="main body">
<div class="container">

  <div class="row mb-4">
    <div class="col"></div>
    <div class="col-8">
      <article class="article text-big">
	<p><img src="/img/iot-project-drawing.png" alt="High Level Sensor Station"></p>
<h2 id="what-does-this-project-do">What Does this project do?</h2>
<p>I started this project to help water our home garden. You see my wife
is really into <em>succulents</em> and while these plants are <em>drought
tolerent</em> they do not like to be over watered. Being in drought ridden
Southern California smart water usage is very important.</p>
<p>The way this <em>Irrigation System (IS)</em> works is pretty simple: build a
<em>Collection Staiton (CS)</em> to gather temperature and soil moisture
levels and publish that data to a <em>Hub</em> that runs application logic
and determines based on moisure levels when to send messages to the
<em>Control Stations (CS)</em> to turn water pumps on or off.</p>
<p>We also have a <em>Web Application</em> that acts as a dashboard to monitor
and control the irrigation system.</p>
<p>And that is NOT ALL! We can also use the cloud for persistent storage
of historical data, and allow control of the system from anywhere in
the world with an Internet connection.</p>
<ol>
<li><em>CS</em> Collect and publish environmental data</li>
<li><em>Hub</em> gather data and run <em>Application Logic (AL)</em></li>
<li><em>CS</em> Control lights, sprinklers and heaters</li>
<li><em>Dashboard</em> Human monitor and control</li>
<li><em>Cloud</em> Perpetual Persistence and Global Access</li>
</ol>
<p>Pretty simple, right?</p>
<h3 id="process-and-protocol-over-technology">Process and Protocol Over Technology</h3>
<p>I will not dive too deep into anyone of the technologies, but rather
document this project from an <em>architectural</em>, <em>design</em> and
<em>software development process</em> lens.</p>
<p>We necessarily get into a few technical discussions, however we&rsquo;ll
supply plenty of references to quality tutorials and deep dives as we
breech various technologies.</p>
<p>Every part of this system could be built with a different technology
and process, that is not important, rather the importance is in the
process management and how the craft people work together.</p>
<h4 id="open-source">Open Source</h4>
<p>This project uses <em>Open Source</em> software <em>Open Protocols</em> and all
freely available development systems. Somebody could easily come along
a build a <em>Microsoft C#</em> CS just as easily as I can build the esp32
version.</p>
<h3 id="proof-of-concept-poc">Proof Of Concept (PoC)</h3>
<p>This is a complex system with a three or four distinct software
components and some hardware. This also involves at least 3 if not
four or five different languages and development environments, just
like in the &ldquo;real world&rdquo;.</p>
<p>We&rsquo;ll build this system one step at a time. The end goal is the
<em>irrigation application</em>, however we can still get something useful
from the software, before it is released if we build it wisely.</p>
<p>For example, in this project we&rsquo;ll use our <em>real time</em> dashboard to
act like an <em>Internet Clock</em> displaying real time temperature data
making the application a bit more useful every day.</p>
<h2 id="milestone-1---aggregation-hub">Milestone 1 - Aggregation Hub</h2>
<p>The first step is to get the Hub to subscribe to MQTT data channels,
then start recieving and <em>caching</em> that data in RAM.</p>
<p>Now that the Hub has data stashed in memory, we will build a <em>REST
API</em> to access the data. We&rsquo;ll also consider <em>GraphQL</em> as a possible
architectural choice.</p>
<p>The Hub is a <em>Micro Service</em> written in Go.</p>
<h2 id="milestone-2---dashboard">Milestone 2 - Dashboard</h2>
<p>Now that we have the Hub collecting data and that data is available
via the <em>REST API</em> we&rsquo;ll build a Dashboard Web application to display
the collected data.</p>
<p>The <em>Dashboard</em> will query the historic data via
the REST API and display that data in graph and table form.</p>
<p>The <em>Dashboard</em> is a <em>Responsive Web Application</em> written with Vue.</p>
<h2 id="milestone-3---real-time-datashboard">Milestone 3 - Real Time Datashboard</h2>
<p>We are going to add <em>Websockets</em> to Hub and the Webapp allowing the
former to send data to the later in <em>real time</em> allowing the dashboard
to display data as it arrives immediately.</p>
<p>The <em>Dashboard</em> and <em>Hub</em> need to be updated to support <em>Websockets</em>
involve adding a <em>Websocket Library</em> for both  <em>JavaScript</em> and <em>Go</em>.</p>
<h2 id="milestone-4---collection-station">Milestone 4 - Collection Station</h2>
<p>The <em>third milestone</em> we are going to build the <em>Collection Station</em>
to gather temperature and humidity. Eventually we&rsquo;ll add sensors for
humidity and light levels.</p>
<p>This component has physical hardware involved making this application
particularly interesting for me. This is what officially makes it an
<em>IoT Project</em> :)</p>
<p>We&rsquo;ll build the <em>CS</em> from an <em>esp32 devkit</em> and a <em>DHT22</em> sensor. This
is an <em>embedded</em> <em>real-time</em> application written in C++ using the
<em>esp-idf</em> development kit and the Free Real Time Operating System
(<em>FreeRTOS</em>).</p>
<h2 id="milestone-5---time-series-database">Milestone 5 - Time Series Database</h2>
<p>Data that has been collected over a long period of time can be saved
locally or in the cloud. In our case, the data we have collected is
known as a <em>time series</em>.</p>
<p>The data can be saved in many different formats or databases. SQL or
MongoDB are choices, however we will go with a <em>Time Series DB</em> built
just for applications such as these.</p>
<p>The two databases in consideration will be <em>prometheus</em> and
<em>influxDB</em> both fast and purpose built specifically <em>time-series</em>
databases.</p>
<h2 id="milestone-6---fleet-management">Milestone 6 - Fleet Management</h2>
<p>As time goes on and the application evolves according to operation
experience and demand, features will be added and software will be
changed. This often leads to disruptive or difficult software upgrade
events.</p>
<p>We are going to strive to managing all of our software update process
with total automation using modern <em>CI/CD</em> techniques and
<em>Over-The-Air</em> software updates. If we can hit this goal <em>and all goes
well</em> we will be able to seamlessly roll out software with very little
human interaction.</p>

      </article>
    </div>
    <div class="col"></div>
  </div>

</div>

<div class="container">
  <div class="row">
    

    <div class="col-6">
      <div class="card mb-4">
	<div class="card-body">

	  <h5 class="card-title">
	    <a href="http://www.rustyeddy.com/collection-station/">Collection Station</a>
	  </h5>

	  <div class="card-text">
	    We are going to build a Sensor Station capable of wirelessly publishing environmental data to any entity that subscribes to the data. The stations are typically battery powered and  run in areas with no electrical power.

	  </div>

          <div class="pt-2">
	    <a href="http://www.rustyeddy.com/collection-station/">read more ...</a>
          </div>

	</div>
      </div>
    </div>

    

    <div class="col-6">
      <div class="card mb-4">
	<div class="card-body">

	  <h5 class="card-title">
	    <a href="http://www.rustyeddy.com/iot-project/hub/">IoT Project Hub</a>
	  </h5>

	  <div class="card-text">
	    The Sensor Hub gathers data from all connected sensors, aggregates the data for real-time and historic display. The also gets your data to the cloud if you have the desire and an Internet connection.

	  </div>

          <div class="pt-2">
	    <a href="http://www.rustyeddy.com/iot-project/hub/">read more ...</a>
          </div>

	</div>
      </div>
    </div>

    

    <div class="col-6">
      <div class="card mb-4">
	<div class="card-body">

	  <h5 class="card-title">
	    <a href="http://www.rustyeddy.com/iot-project/cloud/">IoT Project Cloud Automation</a>
	  </h5>

	  <div class="card-text">
	    Cloud support extends the reach of the data globally allowing access to both real-time and historical datas, it also expands the length data can be kept  

	  </div>

          <div class="pt-2">
	    <a href="http://www.rustyeddy.com/iot-project/cloud/">read more ...</a>
          </div>

	</div>
      </div>
    </div>

    

    <div class="col-6">
      <div class="card mb-4">
	<div class="card-body">

	  <h5 class="card-title">
	    <a href="http://www.rustyeddy.com/iot-project/open-source/">Open Source Software</a>
	  </h5>

	  <div class="card-text">
	    We like Open Source and Open Technology

	  </div>

          <div class="pt-2">
	    <a href="http://www.rustyeddy.com/iot-project/open-source/">read more ...</a>
          </div>

	</div>
      </div>
    </div>

    
  </div> 

</div>



	</div><footer id="footer" class="container-fluid footer small-text pt-4 border-top">
  <section class="row">
    <div class="col"></div>
    <div class="col text-right">
      <div class="address">419 Main St. #439</div>
      <div class="city">Huntington Beach, CA. 92648</div>
    </div>
    <div class="col-3 text-center">
      <div>
        Last update ~
        
	
        Sunday, Sep 6, 2020
	
        
      </div>
      <div>site by <a href="/">Eddy Consulting, LLC.</a> ~ &#xA9; 2008 to 2020 </div>
    </div>
    <div class="col">
      <div class="text-left">
	<div class="phone">(714) 362-5402</div>
	<a href="https://github.com/rustyeddy">github</a> .
	<a href="https://twitter.com/rustyeddy">twitter</a> .
	<a href="https://linkedin.com/rustyeddy">linkedin</a><br/>	    
      </div>
    </div>
    <div class="col"></div>
  </section>
</footer>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-19940083-13"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-19940083-13');
</script>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>




    </body>
</html>
