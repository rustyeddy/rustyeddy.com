<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400;1,600&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">


<title>Arduino Motor Control Software</title>

<script>(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
mixpanel.init("bc05040913854909c46ba8408397cdb5", {batch_requests: true})</script>


<body><header class="container bg-white">
    <nav class="navbar navbar-expand-lg navbar-light">

	<a class="navbar-brand text-muted text-monospace" href="/"><span claa="h1">rusty eddy:</span></a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">

	    <nav class="navbar-nav w-100 justify-content-end">
		<div class="nav w-100">
  		    <a class="nav-link" href="/software">software </a>
  		    <a class="nav-link" href="/notes">notes </a>
  		    <a class="nav-link" href="/redeye">redeye </a>
  	            <a class="nav-link" href="/resume">resume </a>
                    
  		    <a class="nav-link" href="/about">about </a>
		</div>
 	    </nav>
	</div>
    </nav>
</header>
<div class="jumbotron border-top border-bottom bg-white" >
    <div class="row">
	<div class="col-md"></div>
	<div class="col-md-8">
	  <h1 class="header h2 text-center pb-1">Arduino Motor Control Software</h1>
	    <p class="leadin align-right text-muted text-center mt-0">
		In the distributed Mobile Robot Architecture, the Arduino acts as a dedicated micro-controller for the small brushed DC motors.  This Arduino is controlled via commands over a serial, RF or Blue Tooth port of some sort.

	    </p>
	</div>
	<div class="col-md"></div>
    </div>
    <div class="row text-center smaller-text">
	<div class="col"></div>
	<div class="col-8">
	    <nav class="nav justify-content-center">
                
                <a class="nav-link" href="http://github.com/mobilerobot-io/arduino/src/mctl">github</a>
                
                
                
                
                

	    </nav>

	</div>
	<div class="col"></div>
    </div>
</div>
<div id="main body">
<div class="container"><div class="row">
    <div class="col"></div>
    <div class="col-md-8 hero-text">
	<article class="article">
	  

<p>Pictured about is the <a href="https://www.osepp.com/electronic-modules/shields/120-motor-shield-6612">OSEPP v2
Motor Shield</a>
which can be used as a functional replacement to the <a href="https://learn.adafruit.com/adafruit-dc-and-stepper-motor-hat-for-raspberry-pi/using-dc-motors">Adafruit v2
motorshield</a>,
the motorshield I recommend.</p>

<blockquote>
<p>Source code can be found here
<a href="http://github.com/mobilerobot-io/arduino/">http://github.com/mobilerobot-io/arduino/</a>
within the src/mctl directory.</p>
</blockquote>

<h2 id="arduino-motorsheild-and-distributed-controls">Arduino Motorsheild and Distributed Controls</h2>

<p>The software in the repository is to be loaded on an Arduino with
either an Adafruit v2 Arduino or OSEPP 6612 MotorShield.  The software
accepts commands as incoming text strings from one of several possible
<em>serial inputs</em>; UART, RF Radio, Blue Tooth, etc.</p>

<blockquote>
<p>TODO: place diagram showing an arduino accepting commands from a RPi</p>
</blockquote>

<p>Input commands are parsed and the commands are acted on
accordingly. For example, our SkidSteer provide the following
<em>throttle</em> method to change the speed and direction of the vehicle.</p>

<p>I prefer to use an Arduino with a <em>Motor Shield</em> as a dedicated
micro-controller regulating the voltage supplied to the DC motors, it
may carry on local conversions or control calculations dedicated to
proper motor handling.</p>

<p>Additional sensors and guidance inputs can be handled by additional,
perhaps less critical controllers.  Hopefully reducing the chance of
critical motor controllers from failing.</p>

<h3 id="the-big-skidder">The Big Skidder</h3>

<p>My primary vehical is a 4wd, that is 4 DC motors directy spinning two
rubber tires.  I also have available two, two wheeled vehicals and a
<em>train tracked</em> vehical.</p>

<p>In all cases each of these vehicle employ <a href="/notes/skid-steering"><em>skid
steering</em></a> on account a one wheel (wheels or
tread) will be skidding along when your turnin.</p>

<h2 id="required-motors-and-controller">Required Motors and Controller</h2>

<p>We need to power the following motors (at minimum):</p>

<ul>
<li>4 DC Motors</li>
<li>2 Servos</li>
</ul>

<h2 id="adafruit-motorshield">Adafruit MotorShield</h2>

<p>The first phase of building Robots I recommend the Adafruit Motor
Shield V2.  I also tried the OSEPP 6612 and Adafruit Motor Shield v1
(before I realized there was a version 2).</p>

<p>Links to the shields can be found here:</p>

<ol>
<li><a href="https://learn.adafruit.com/adafruit-dc-and-stepper-motor-hat-for-raspberry-pi/using-dc-motors">Adafruit v2 Arduino DC/Stepper MotorController</a></li>
<li>[OSEPP v2 MotorController]()</li>
</ol>

<blockquote>
<p>Insert picture of Adafruit Motor shield</p>
</blockquote>

<h3 id="osepp-shields-v1-v2">OSEPP Shields v1 &amp; v2</h3>

<p>The OSEPP MotorSheilds effectively duplicate the functionality of the
Adafruite MotorShields.</p>

<p>The documentation is hard to find and must be pieced together through
the documentation of their hardware kits.  I do find the hardware to
be of a sturdy make.  The use connectors to help in learning, the
Adafruit are more through for real prototyping.</p>

<p>For particular details about the controller and other hardware please
refer to the Adafruit and respective product websites.</p>

<h2 id="arudio-mctl-software">Arudio MCTL Software</h2>

<p>The code in this library can be compiled by with the
<a href="http://arduino.io/downloads">Arduino IDE</a> to an UNO with an Adafrutit
v.2 (or compatible) motor controller.  One of the MBR vehicles OSEPP
Two Wheel balancer uses an OSEPP motor library wich is very similar
(but) different than the Adafruit version.</p>

<h3 id="reads-from-serial-input">Reads From Serial Input</h3>

<p>This could be virtually any &ldquo;stream&rdquo; of data from a UART, RF, Blue
Tooth or Wifi ports.  Regardless, the software reads from the
appropriate input, parses the incoming commands and adjusts power to
the motors accordingly.</p>

<blockquote>
<p>Place snippet of Skidder software class here</p>
</blockquote>

<h3 id="mqtt-and-motor-control-channel">MQTT and Motor Control Channel</h3>

<p>Connect the motor controller to the MQTT control channel.  NOTE: on
vehicle may use the motor control channel when availble, however, must
always be able to regain control (or shutdown completely) if the
control channel has been lost.</p>

<h2 id="testing-and-validation">Testing and Validation</h2>

<p>How is this software tested and valided for promotion?</p>

<blockquote>
<p>Todo document the testing procedure</p>
</blockquote>

<h2 id="maintanance-and-upgrades">Maintanance and Upgrades</h2>

<blockquote>
<p>Todo document the deployment and production release producedure.</p>
</blockquote>

<p>Alas, too many projects, to little time!</p>

	</article>
    </div>
    <div class="col"></div>
</div>
</div>


	</div><footer id="footer" class="container-fluid footer small-text pt-4 border-top">
    <section class="row">
	<div class="col"></div>
	<div class="col text-right">
	    <div class="address">419 Main St. #439</div>
	    <div class="city">Huntington Beach, CA. 92648</div>
	</div>
	<div class="col-3 text-center">
	    <div>
                Last update ~
                
		
                Wednesday, Aug 22, 2018
		
                
            </div>
	    <div>site by <a href="/">Eddy Consulting, LLC.</a> ~ &#xA9; 2008 to 2020 </div>
	</div>
	<div class="col">
	    <div class="text-left">
	        <div class="phone">(714) 362-5402</div>
		<a href="https://github.com/rustyeddy">github</a> .
		<a href="https://twitter.com/rustyeddy">twitter</a> .
		<a href="https://linkedin.com/rustyeddy">linkedin</a><br/>	    
	    </div>
	</div>
	<div class="col"></div>
    </section>
</footer>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-19940083-13', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    </body>
</html>
